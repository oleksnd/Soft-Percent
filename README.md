# Soft-Percent — Growth Tracker (Chrome Extension)

Soft-Percent is a lightweight Chrome extension (Manifest V3) for tracking daily habits and progress across skills. It combines a minimal UI, a 7-day "momentum" visualization, a local achievements system, and a compact popup for fast interactions.

## Key Features

- Skill management: add, edit, delete skills and mark them as completed for the day.
- Momentum (7-day charge): visual indicator of recent activity per skill and globally.
- Achievements: many local achievements with popup banners; banners are cached for a day to avoid repetition.
- Reset account: clear data and start fresh.
- Modern pastel / glassmorphism UI.
- MV3 with ES modules: service worker background and modular popup UI.

## Quick Start (Load locally)

1. Open Chrome (or Chromium).
2. Navigate to `chrome://extensions`.
3. Enable "Developer mode".
4. Click "Load unpacked" and select the project folder containing `manifest.json`.
5. Open the extension popup and verify behavior.

Note: After editing popup or background code, press Reload on the extension page or use DevTools for the service worker and popup.

## Development

- Language: JavaScript (ES modules)
- Target: Chrome Extension Manifest V3
- UI: native DOM modules in `popup/components/` (no React or heavy frameworks)

Developer workflow:

- Edit files under `popup/` or `background/`.
- Reload the extension on `chrome://extensions`.
- Use DevTools:
	- Popup: open popup then Inspect
	- Background service worker: open Service worker -> Inspect on the extension page

## Project structure (important files)

- `manifest.json` — extension manifest (MV3)
- `background/index.js` — service worker: state management, alarms, and message handlers (GET_STATE, ADD_SKILL, UPDATE_SKILL, DELETE_SKILL, RESET_ACCOUNT, etc.)
- `popup/` — popup UI
	- `index.html` — popup entry
	- `main.js` — compose popup UI and render state
	- `components/` — modular UI components:
		- `Header.js` — header (user name, sign-in, settings)
		- `AchievementBanner.js` — achievements UI (collapsible/expandable banners)
		- `SkillList.js` — skills list and actions
		- `MomentumBar.js`, `GlobalMomentum.js` — momentum visuals
		- `SettingsDropdown.js`, `ResetModal.js` — settings and reset modal
- `utils/` — helper modules
	- `date.js` — `todayKey()` and timezone helpers
	- `calc.js` — momentum and summary calculations
	- `achievements.js` — achievement generation rules and texts
	- `constants.js` — storage keys and other constants
	- `id.js` — id generator
- `ui/theme.css` — main theme and styles (pastel / glassy look)

## Storage and contracts

The extension uses `chrome.storage.local` (some parts may use `chrome.storage.sync` if desired) via small helpers.

Common keys:
- `meta`, `user`, `skills` — core user data and skills list
- `dayLogs` / `dayLog` — activity logs by date
- `achievements_cache_v1` — local cache of achievements shown in the popup (prevents repeated display the same day)
- `achievements_last_reset_v1` — the last-reset date (`YYYY-MM-DD`) used to clear daily cache

Switching to `chrome.storage.sync` is possible but watch for quota limits.

## Messaging (popup <-> background)

Messages use a simple contract over `chrome.runtime.sendMessage`:

- Request shape: `{ type: 'SOME_TYPE', payload: {...} }`
- Response shape: `{ ok: true, result }` or `{ ok: false, error, code }`

Important message types:
- `GET_STATE` — fetch the full app state (skills, dayLogs, summary)
- `ADD_SKILL` — add a new skill
- `UPDATE_SKILL` — patch/update a skill (atomic)
- `DELETE_SKILL` — delete a skill
- `CHECK_SKILL` — mark a skill as checked for today
- `RESET_ACCOUNT` — reset the user account and reinitialize state

The background service worker contains atomic update logic and alarms.

## Achievements

- Achievements are generated by `utils/achievements.js` and include a unique `id`, `title`, `description`, and `icon`.
- The popup shows the most recent achievement by default, with an "Expand all" control to view the full list.
- Displayed achievement banners are cached for a day so they don't accumulate.

## UX and design

- Minimal, pastel/glass visual language with subtle shadows and rounded corners.
- Popup contains momentum visuals and a compact achievement stack that animates when items are removed.

## Build and dependencies

This repository is intentionally lightweight and doesn’t require a build tool by default. If you want to add a bundler (Rollup, Webpack, etc.) or npm scripts, add a `package.json` and I can help wire up a build step.

## Debugging and testing

- Inspect the background service worker via `chrome://extensions` -> Service worker -> Inspect.
- Inspect the popup via popup -> right-click -> Inspect.
- Check storage via DevTools console: `chrome.storage.local.get(['achievements_cache_v1','achievements_last_reset_v1'], console.log)`.

## Suggestions & future improvements

- Add unit tests for utilities (`calc`, `achievements`, `date`).
- Add e2e tests for main flows (add, check, achievements generation).
- Optionally switch to `chrome.storage.sync` for cross-device sync with compression.

## Contributing

1. Fork the repository and create a feature/bugfix branch.
2. Make small focused commits.
3. Open a Pull Request with a clear description.
4. Attach screenshots or GIFs for UI changes when relevant.

## License

Add your preferred license (e.g. MIT) or your corporate license template.

---

Would you like:
- an English `README` only (this change), or also a shorter `README.md` for the popup or auth subfolders?
- screenshots or a quick "How to test locally" section with commands if you have build scripts?

I have finished converting the README to English.
